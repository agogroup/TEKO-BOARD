# TEKO-BOARD 開発ロードマップ

**バージョン**: 1.0
**作成日**: 2025年12月17日
**最終更新**: 2025年12月17日

---

## 1. 全体スケジュール

```
┌──────────────────────────────────────────────────────────────────────────────┐
│                         TEKO-BOARD 開発ロードマップ                            │
└──────────────────────────────────────────────────────────────────────────────┘

Phase 1: MVP（TimeChart + 基本CRUD）
├─────────────────────────────────────────────────────────────────────┤
Sprint 1.1    Sprint 1.2    Sprint 1.3    Sprint 1.4
(12月後半)    (1月前半)     (1月後半)     (2月前半)

                                          Phase 2: 効率化
                                          ├─────────────────────────────────────┤
                                          Sprint 2.1    Sprint 2.2    Sprint 2.3
                                          (2月後半)     (3月前半)     (3月後半)

                                                                      Phase 3: 高度化
                                                                      ├─────────────────┤
                                                                      Sprint 3.1
                                                                      (4月〜)

─────────────────────────────────────────────────────────────────────────────────
   12月           1月            2月            3月            4月
─────────────────────────────────────────────────────────────────────────────────
     │              │              │              │
     │              │              │              │
     ▼              ▼              ▼              ▼
  DB設計完了    MVP機能完成    並行運用開始   旧版廃止
  Next.js作成   TimeChart実装  フィードバック  完全移行
```

### タイムライン概要

| フェーズ | 期間 | 目標 |
|---------|------|------|
| Phase 1: MVP | 12月〜2月前半 | TimeChart + 基本CRUD完成 |
| Phase 2: 効率化 | 2月後半〜3月 | 自動化・通知機能追加 |
| Phase 3: 高度化 | 4月〜 | 分析・最適化機能 |

---

## 2. Phase 1: MVP（TimeChart + 基本CRUD）

### 目標
**タイムチャートによる人員配置の可視化と、基本的なデータ管理機能を実装**

旧版（React + Vite）で実装済みの機能をNext.js + Supabaseに移植し、データを永続化します。

---

### Sprint 1.1（12月後半）: 環境構築・DB設計

#### タスク

| タスク | 詳細 | 優先度 | 状態 |
|--------|------|--------|------|
| Next.js プロジェクト作成 | App Router, TypeScript, Tailwind | 必須 | ✅ 完了 |
| shadcn/ui セットアップ | コンポーネントライブラリ | 必須 | ✅ 完了 |
| Supabase接続設定 | クライアント設定、環境変数 | 必須 | ✅ 完了 |
| DBマイグレーション作成 | TEKOテーブル追加（teko_assignments） | 必須 | ✅ 完了 |
| RLSポリシー設定 | 認証ベースのアクセス制御 | 必須 | ✅ 完了 |
| 認証フロー実装 | ログイン、Middleware、proxy.ts | 必須 | ✅ 完了 |
| 基本レイアウト | サイドバー、ナビゲーション | 必須 | ✅ 完了 |

#### 成果物
- 動作するNext.js環境
- TEKOテーブルがSupabaseに追加
- 認証機能（AGORA共通）
- 基本レイアウト

---

### Sprint 1.2（1月前半）: TimeChart移植

#### タスク

| タスク | 詳細 | 優先度 |
|--------|------|--------|
| TimeChart コンポーネント | 旧版からの移植、Supabase対応 | 必須 |
| 日別ビュー | 24時間表示、横スクロール | 必須 |
| 週間ビュー | 7日間表示 | 必須 |
| 日付切替 | 前日/翌日、日付ピッカー | 必須 |
| 現在時刻の線 | 当日のみ表示 | 必須 |
| ワーカーデータ取得 | Supabaseからのフェッチ | 必須 |
| 現場データ取得 | Supabaseからのフェッチ | 必須 |
| 配置データ取得 | 日付ベースのクエリ | 必須 |

#### 成果物
- タイムチャートの表示機能
- Supabaseからのデータ取得

---

### Sprint 1.3（1月後半）: ドラッグ&ドロップ・CRUD

#### タスク

| タスク | 詳細 | 優先度 |
|--------|------|--------|
| ドラッグ&ドロップ | 時間変更、担当者変更 | 必須 |
| リサイズ | 開始/終了時間の変更 | 必須 |
| スケジュール詳細モーダル | タップで詳細表示 | 必須 |
| スケジュール追加フォーム | 新規配置の登録 | 必須 |
| スケジュール編集 | 既存配置の更新 | 必須 |
| スケジュール削除 | 配置の削除（確認付き） | 必須 |
| React Query 導入 | サーバー状態管理 | 必須 |
| Zustand 導入 | UI状態管理 | 必須 |

#### 成果物
- 完全なタイムチャート操作機能
- スケジュールのCRUD

---

### Sprint 1.4（2月前半）: 管理画面・MVP完成

#### タスク

| タスク | 詳細 | 優先度 | 状態 |
|--------|------|--------|------|
| 現場一覧画面 | 検索、フィルタ | 必須 | ✅ 完了 |
| 現場登録/編集 | フォーム、バリデーション | 必須 | 🔲 未着手（AGORAで管理） |
| 現場詳細画面 | 基本情報、スケジュール履歴 | 必須 | ✅ 完了 |
| 連絡先一覧画面 | 検索、カテゴリフィルタ | 必須 | 🔲 未着手 |
| 連絡先登録/編集 | フォーム | 必須 | 🔲 未着手 |
| ワンタップ発信 | tel:リンク | 必須 | 🔲 未着手 |
| ワーカー管理画面 | 一覧、登録、編集 | 重要 | ✅ 完了（一覧・詳細） |
| 配置管理画面 | 一覧、新規、編集、削除 | 必須 | ✅ 完了 |
| エラーハンドリング | トースト、エラー境界 | 必須 | 🔲 未着手 |
| レスポンシブ対応 | スマホ最適化 | 必須 | 🔲 未着手 |

#### 成果物
- **MVP完成**: タイムチャート + 全管理画面
- 本番デプロイ準備完了

---

## 3. Phase 2: 効率化

### 目標
**自動化機能と通知機能で、配車判断の効率化を実現**

---

### Sprint 2.1（2月後半）: AGORA連携・データ移行

#### タスク

| タスク | 詳細 | 優先度 | 状態 |
|--------|------|--------|------|
| AGORA案件連携 | teko_assignments.project_id で紐付け | 必須 | ✅ 完了 |
| クライアント連携 | 共有clientsテーブル参照 | 必須 | ✅ 完了 |
| 現場→案件リンク | AGORAへのリンク表示 | 重要 | ✅ 完了 |
| 職人→ワーカーリンク | AGORAへの編集リンク | 重要 | ✅ 完了 |
| サンプルデータ移行 | 既存データのインポート | 必須 | 🔲 未着手 |
| 旧版との並行運用 | 切り替え準備 | 必須 | 🔲 未着手 |
| ユーザーフィードバック収集 | UI改善のための調査 | 重要 | 🔲 未着手 |

#### 成果物
- AGORAとのデータ連携
- 旧版からの移行準備完了

---

### Sprint 2.2（3月前半）: 通知・自動化

#### タスク

| タスク | 詳細 | 優先度 |
|--------|------|--------|
| ゴミ発生タイミング表示 | 作業種別からの自動算出 | 重要 |
| 作業種別ハイライト | ゴミが出る作業の強調表示 | 重要 |
| 空き状況表示 | ワーカーの空き時間可視化 | 重要 |
| LINE通知（基本） | Webhook設定、通知送信 | 重要 |
| 工程変更通知 | スケジュール変更時の通知 | 重要 |

#### 成果物
- ゴミ発生タイミングの可視化
- LINE通知機能（基本）

---

### Sprint 2.3（3月後半）: 完全移行・安定化

#### タスク

| タスク | 詳細 | 優先度 |
|--------|------|--------|
| 旧版の廃止 | 新版への完全切り替え | 必須 |
| パフォーマンス改善 | クエリ最適化、キャッシュ | 重要 |
| バグ修正 | フィードバック対応 | 必須 |
| UI/UX改善 | 操作性向上 | 重要 |
| ドキュメント整備 | 操作マニュアル | 重要 |

#### 成果物
- 旧版廃止、完全移行完了
- 安定運用

---

## 4. Phase 3: 高度化（将来計画）

### 目標
**データ分析と最適化機能で、さらなる効率化を実現**

---

### Sprint 3.1（4月〜）: 分析・最適化

#### タスク

| タスク | 詳細 | 優先度 |
|--------|------|--------|
| 職人単位への展開 | 会社単位→個人単位 | 中 |
| 配車ルート提案 | 複数現場の効率的順序 | 中 |
| 配車履歴分析 | 過去データの傾向分析 | 低 |
| 産廃コスト試算 | ゴミ量からの費用概算 | 低 |
| 特殊手当計算 | 夜勤・ロープアクセス等 | 低 |
| 案件別経費集計 | 日報からの自動集計 | 低 |
| Googleマップ連携 | 現場間ルート表示 | 中 |
| PWA対応 | オフラインキャッシュ | 中 |

#### 成果物
- 高度な分析・最適化機能
- より効率的な配車支援

---

## 5. マイルストーン

| マイルストーン | 目標時期 | 内容 | 達成基準 |
|---------------|---------|------|----------|
| **M1: DB設計完了** | 12月中 | TEKOテーブル追加、RLS設定 | マイグレーション適用完了 |
| **M2: TimeChart動作** | 1月中旬 | タイムチャート表示、データ取得 | Supabaseデータで表示可能 |
| **M3: MVP完成** | 2月前半 | 全機能実装、本番デプロイ | 旧版と同等以上の機能 |
| **M4: 並行運用開始** | 2月後半 | 新旧システムの併用 | ユーザーテスト開始 |
| **M5: 完全移行** | 3月末 | 旧版廃止、新版のみ | 旧版アクセス停止 |

---

## 6. 旧版からの移植チェックリスト

旧版（`/Volumes/HD-WLU3/teko-board/`）で実装済みの機能:

### Phase 1 完了機能（旧版）

| 機能 | 旧版状態 | 新版移植 |
|------|---------|----------|
| タイムチャート（日別） | ✅ 完了 | 🔲 未着手 |
| タイムチャート（週間） | ✅ 完了 | 🔲 未着手 |
| 日付切替 | ✅ 完了 | 🔲 未着手 |
| 日別/週間表示の切替 | ✅ 完了 | 🔲 未着手 |
| セルタップで詳細表示 | ✅ 完了 | 🔲 未着手 |
| ドラッグ&ドロップ（時間変更） | ✅ 完了 | 🔲 未着手 |
| ドラッグ&ドロップ（担当者変更） | ✅ 完了 | 🔲 未着手 |
| リサイズ（開始/終了時間変更） | ✅ 完了 | 🔲 未着手 |
| 現在時刻の縦線 | ✅ 完了 | 🔲 未着手 |
| 新規スケジュール追加 | ✅ 完了 | 🔲 未着手 |
| 現場一覧画面 | ✅ 完了 | 🔲 未着手 |
| 連絡先検索画面 | ✅ 完了 | 🔲 未着手 |
| 下部ナビゲーション | ✅ 完了 | 🔲 未着手 |

### 旧版→新版の主な変更点

| 項目 | 旧版 | 新版 |
|------|------|------|
| フレームワーク | React + Vite | Next.js 14 (App Router) |
| データ保存 | useState（メモリ） | Supabase（永続化） |
| 認証 | なし | Supabase Auth（AGORA共通） |
| スタイリング | Tailwind CSS | Tailwind CSS + shadcn/ui |
| 状態管理 | useState | React Query + Zustand |

---

## 7. 開発体制

### 7.1 開発手法

| 項目 | 内容 |
|------|------|
| 手法 | AI駆動開発 (Claude Code) |
| スプリント | 2週間 |
| レビュー | 各スプリント終了時 |
| テスト | 主要機能の手動テスト |

### 7.2 開発環境

| 環境 | URL | 用途 |
|------|-----|------|
| Development | localhost:3001 | ローカル開発 |
| Preview | teko-*.vercel.app | PRプレビュー |
| Production | teko.ugoku.co.jp | 本番 |

※ AGORAは3000番ポートを使用するため、TEKO-BOARDは3001番を使用

### 7.3 ブランチ戦略

```
teko-board/
├── main                      # 本番環境
├── develop                   # 開発環境
└── feature/*                 # 機能ブランチ
```

### 7.4 開発フロー

```
1. タスク確認
   ↓
2. feature ブランチ作成
   ↓
3. Claude Codeで実装
   ↓
4. ローカルで動作確認
   ↓
5. PR作成 → Preview環境で確認
   ↓
6. マージ → develop
   ↓
7. develop → main (リリース時)
```

---

## 8. リスク管理

| リスク | 影響 | 対策 |
|--------|------|------|
| 旧版機能の移植漏れ | 使い勝手低下 | チェックリストで管理 |
| Supabase連携の問題 | 機能制限 | 早期の技術検証 |
| AGORA認証との整合性 | ログイン不可 | 共通認証の動作確認 |
| スマホでの操作性 | 現場で使えない | 早期のスマホテスト |
| ドラッグ&ドロップの動作 | タッチ操作不良 | タッチイベントの入念なテスト |
| 開発遅延 | リリース遅れ | MVP機能の優先、段階的リリース |

---

## 9. 成功指標

### Phase 1 完了時（MVP）

| 指標 | 目標 |
|------|------|
| タイムチャート表示 | 2秒以内 |
| ドラッグ操作 | 遅延なくスムーズ |
| 旧版と同等の機能 | 100% |
| スマホでの操作 | 問題なく使用可能 |

### Phase 2 完了時（完全移行）

| 指標 | 目標 |
|------|------|
| 旧版アクセス | 0（完全停止） |
| ユーザーからの不具合報告 | 重大なものなし |
| 配車判断時間 | 旧版より短縮 |

### Phase 3 完了時（高度化）

| 指標 | 目標 |
|------|------|
| ゴミ発生予測精度 | 80%以上 |
| 配車効率 | 改善実感 |
| ユーザー満足度 | 80%以上 |

---

## 10. 次のアクション

### Sprint 1.2 タスク（TimeChart移植）

1. **TimeChart コンポーネント作成**
   - 旧版からの移植、Supabase対応
   - 日別・週間ビューの実装

2. **React Query / Zustand 導入**
   - サーバー状態管理
   - UI状態管理

3. **日付切替機能**
   - 前日/翌日ナビゲーション
   - 日付ピッカー

### Sprint 1.3 準備（ドラッグ&ドロップ）

1. ドラッグ&ドロップライブラリの選定
2. タッチ操作対応の検証
3. リサイズ機能の設計

---

## 11. ドキュメント一覧

| ドキュメント | ファイル | 内容 |
|-------------|---------|------|
| 要件定義書 | `docs/01_要件定義書.md` | 機能・非機能要件 |
| 画面設計書 | `docs/02_画面設計書.md` | ワイヤーフレーム、画面遷移 |
| DB設計書 | `docs/03_データベース設計書.md` | ER図、テーブル定義 |
| 技術設計書 | `docs/04_技術設計書.md` | アーキテクチャ、技術スタック |
| ロードマップ | `docs/05_開発ロードマップ.md` | 本ドキュメント |

---

## 12. 参考リンク

### 内部ドキュメント
- [AGOグループ システム全体設計書](/Volumes/HD-WLU3/AGO秘書_V2/ドキュメント/技術/AGOグループ_システム全体設計書.md)
- [旧版 TEKO-BOARD](/Volumes/HD-WLU3/teko-board/)
- [AGORA](/Users/ago/AGORA/)

### 外部リンク
- [Next.js Documentation](https://nextjs.org/docs)
- [Supabase Documentation](https://supabase.com/docs)
- [shadcn/ui](https://ui.shadcn.com/)
- [React Query](https://tanstack.com/query/latest)

---

## 更新履歴

| 日付 | バージョン | 内容 |
|------|-----------|------|
| 2025-12-17 | 1.0 | 初版作成 |
| 2025-12-17 | 1.1 | Sprint 1.1完了、Sprint 1.4/2.1の進捗更新、AGORA連携完了 |

### 2025-12-17 実装完了項目

**Sprint 1.1（環境構築・DB設計）** - 全タスク完了
- Next.js 16 + App Router プロジェクト作成
- Tailwind CSS v4 + shadcn/ui (New York style) 設定
- Supabase連携（teko_assignments テーブル、RLSポリシー）
- 認証フロー（proxy.ts、ログインページ）
- サイドバーナビゲーション

**Sprint 1.4（管理画面）** - 一部完了
- 現場一覧ページ (`/sites`)
- 現場詳細ページ (`/sites/[id]`)
- 職人一覧ページ (`/workers`)
- 職人詳細ページ (`/workers/[id]`)
- 配置管理（新規作成、編集、削除）

**Sprint 2.1（AGORA連携）** - 一部完了
- projects テーブルとの JOIN
- workers テーブルとの JOIN
- clients テーブル参照
- AGORAへの遷移リンク
